<meta charset="utf-8">
    
<title>逝光-llbc</title> 

<style>

#關卡4頁面
{
height:100vh;
background-image:url("bg1.PNG");
background-repeat:no-repeat;
background-size: cover;
}

#pic1
{
position: absolute;
top: 46%;
left: 14%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic2
{
position: absolute;
top: 46%;
left: 22%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic3
{
position: absolute;
top: 46%;
left: 30%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic4
{
position: absolute;
top: 46%;
left: 38%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic5
{
position: absolute;
top: 46%;
left: 46%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic6
{
position: absolute;
top: 46%;
left: 54%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic7
{
position: absolute;
top: 46%;
left: 62%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic8
{
position: absolute;
top: 46%;
left: 70%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#back6
{
font-size: 200%;
position: absolute;
top: 95%;
left: 94%;
transform: translate(-50%,-50%);
border: 5px solid #ddd;
padding: 3px;
}

a:link
{
color: white;  
}

a:visited
{
color: white;
}

#gkword
{
color: white;
}

#gkword1
{
color: white;
font-size: 150%;
}

#stage
{
font-size: 400%;
color: white;
}

</style>

<body>

<div id="關卡4頁面">

<p id="stage">stage 4</p>

<form id="gkword1">
點擊要改變的燈，相鄰的燈會互相影響，當燈全部關上即通關<br><br>
</form>
<div id="pic">
    <div id="pic1" style="background-image: url('ddpic.png');"></div>
    <div id="pic2" style="background-image: url('ddpic.png');"></div>
    <div id="pic3" style="background-image: url('ddpic.png');"></div>
    <div id="pic4" style="background-image: url('ddpic.png');"></div>
    <div id="pic5" style="background-image: url('ddpic.png');"></div>
    <div id="pic6" style="background-image: url('ddpic.png');"></div>
    <div id="pic7" style="background-image: url('ddpic.png');"></div>
    <div id="pic8" style="background-image: url('ddpic.png');"></div>
</div>

<script>
var lights = [0, 0, 0, 0, 0, 0, 0, 0];
for (i=0; i < Math.floor(Math.random()*10)+5; i++) {changelight(Math.floor(Math.random()*8+1))}

document.querySelector("#pic1").addEventListener("click", function(){changelight(1);overclick();});
document.querySelector("#pic2").addEventListener("click", function(){changelight(2);overclick();});
document.querySelector("#pic3").addEventListener("click", function(){changelight(3);overclick();});
document.querySelector("#pic4").addEventListener("click", function(){changelight(4);overclick();});
document.querySelector("#pic5").addEventListener("click", function(){changelight(5);overclick();});
document.querySelector("#pic6").addEventListener("click", function(){changelight(6);overclick();});
document.querySelector("#pic7").addEventListener("click", function(){changelight(7);overclick();});
document.querySelector("#pic8").addEventListener("click", function(){changelight(8);overclick();});

function changelight(number) {
    if (number == 1) {
        mirrorlight(1);
        mirrorlight(2);
    }
    else if (number == 8) {
        mirrorlight(7);
        mirrorlight(8);
    }
    else {
        mirrorlight(number-1);
        mirrorlight(number);
        mirrorlight(number+1);
    }
}

function mirrorlight(number) {
    if (lights[number-1] == 0) {
        lights[number-1] = 1;
        document.getElementById("pic"+number).style.backgroundImage = "url('llpic.png')";
    }
    else {
        lights[number-1] = 0;
        document.getElementById("pic"+number).style.backgroundImage = "url('ddpic.png')";
    }
}
function overclick() {
    let sum = 0;
    lights.forEach(value => {sum += value;});
    if (sum == 0) {
        setTimeout(function() {
            if (confirm("恭喜過關\n\n按下確定進入下一關") == true) {
            location.href = "stage5.html";
            }
        }, 10);
    }
}

</script>

<div id="back6">
    <a href="選關頁面.html">返回</a>
    
</div>