<meta charset="utf-8">
    
<title>逝光-llbc</title> 

<style>

#關卡5頁面
{
height:100vh;
background-image:url("bg1.PNG");
background-repeat:no-repeat;
background-size: cover;
}

#pic1
{
position: absolute;
top: 38%;
left: 34%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic2
{
position: absolute;
top: 38%;
left: 42%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic3
{
position: absolute;
top: 38%;
left: 50%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic4
{
position: absolute;
top: 50%;
left: 34%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic5
{
position: absolute;
top: 50%;
left: 42%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic6
{
position: absolute;
top: 50%;
left: 50%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic7
{
position: absolute;
top: 62%;
left: 34%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic8
{
position: absolute;
top: 62%;
left: 42%;
background-repeat:no-repeat;
width:121px;
height:91px;
}

#pic9
{
position: absolute;
top: 62%;
left: 50%;
background-repeat:no-repeat;
width:121px;
height:91px;
}


#back7
{
font-size: 200%;
position: absolute;
top: 95%;
left: 94%;
transform: translate(-50%,-50%);
border: 5px solid #ddd;
padding: 3px;
}

a:link
{
color: white;  
}

a:visited
{
color: white;
}

#gkword
{
color: white;
}

#gkword1
{
color: white;
font-size: 150%;
}

#stage
{
font-size: 400%;
color: white;
}

</style>

<body>

<div id="關卡5頁面">

<p id="stage">stage 5</p>

<form id="gkword1">
點擊要改變的燈，相鄰的燈會互相影響，當燈全部關上即通關<br><br>
</form>
<div id="pic">
    <div id="pic1" style="background-image: url('ddpic.png');"></div>
    <div id="pic2" style="background-image: url('ddpic.png');"></div>
    <div id="pic3" style="background-image: url('ddpic.png');"></div>
    <div id="pic4" style="background-image: url('ddpic.png');"></div>
    <div id="pic5" style="background-image: url('ddpic.png');"></div>
    <div id="pic6" style="background-image: url('ddpic.png');"></div>
    <div id="pic7" style="background-image: url('ddpic.png');"></div>
    <div id="pic8" style="background-image: url('ddpic.png');"></div>
    <div id="pic9" style="background-image: url('ddpic.png');"></div>
</div>

<script>
var lights = [0, 0, 0, 0, 0, 0, 0, 0, 0];
for (i=0; i < Math.floor(Math.random()*10)+15; i++) {changelight(Math.floor(Math.random()*9+1))}

document.querySelector("#pic1").addEventListener("click", function(){changelight(1);overclick();});
document.querySelector("#pic2").addEventListener("click", function(){changelight(2);overclick();});
document.querySelector("#pic3").addEventListener("click", function(){changelight(3);overclick();});
document.querySelector("#pic4").addEventListener("click", function(){changelight(4);overclick();});
document.querySelector("#pic5").addEventListener("click", function(){changelight(5);overclick();});
document.querySelector("#pic6").addEventListener("click", function(){changelight(6);overclick();});
document.querySelector("#pic7").addEventListener("click", function(){changelight(7);overclick();});
document.querySelector("#pic8").addEventListener("click", function(){changelight(8);overclick();});
document.querySelector("#pic9").addEventListener("click", function(){changelight(9);overclick();});

function changelight(number) {
    if (number == 3) {
        mirrorlight(2);
        mirrorlight(3);
        mirrorlight(6);
    }
    else if (number == 7) {
        mirrorlight(4);
        mirrorlight(7);
        mirrorlight(8);
    }
    else if ((number == 4)||(number == 6)) {
        mirrorlight(5);
        mirrorlight(number);
        mirrorlight(number-3);
        mirrorlight(number+3);
    }
    else {
        mirrorlight(number);
        if ((number-3 >=1)&&(number-3 <= 9)) {mirrorlight(number-3);}
        if ((number-1 >=1)&&(number-1 <= 9)) {mirrorlight(number-1);}
        if ((number+1 >=1)&&(number+1 <= 9)) {mirrorlight(number+1);}
        if ((number+3 >=1)&&(number+3 <= 9)) {mirrorlight(number+3);}
    }
}

function mirrorlight(number) {
    if (lights[number-1] == 0) {
        lights[number-1] = 1;
        document.getElementById("pic"+number).style.backgroundImage = "url('llpic.png')";
    }
    else {
        lights[number-1] = 0;
        document.getElementById("pic"+number).style.backgroundImage = "url('ddpic.png')";
    }
}
function overclick() {
    let sum = 0;
    lights.forEach(value => {sum += value;});
    if (sum == 0) {
        setTimeout(function() {
            if (confirm("恭喜過關\n\n您已完成所有基礎關卡\n\n是否挑戰難度???級關卡?") == true) {
            location.href = "stage6.html";
            }
        }, 10);
    }
}

</script>

<div id="back7">
    <a href="選關頁面.html">返回</a>
    
</div>